language: python
python: 3.6.6

sudo: required

addons:
  apt:
    packages:
      - docker-ce

services:
  - docker

cache:
  directories:
    - ~/.cache/pip
    - node_modules/

script:
  - make build
  - make tests

matrix:
  include:
    - env:
      - SUITE=Tests
    - env:
        - SUITE=Lint
      script: make lint
    - env:
        - SUITE=Documentation
      script: make docs
    - env:
        - SUITE=Dependencies
      script: make travis-deps
    - env:
        - SUITE=Licenses
      script: make licenses

after_success:
  - bash <(curl -s https://codecov.io/bash)

branches:
  only:
    - master

notifications:
  irc:
    channels:
      - "irc.freenode.org#pypa-dev"
    use_notice: true
    skip_join: true
