{#
 # Licensed under the Apache License, Version 2.0 (the "License");
 # you may not use this file except in compliance with the License.
 # You may obtain a copy of the License at
 #
 # http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
-#}
{% extends "manage_project_base.html" %}

{% set active_tab = 'settings' %}

{% block title %}Manage '{{ project.name }}' settings{% endblock %}

{% block main %}
  <h2>Project settings</h2>

  <h3>API tokens</h3>
  <p>API tokens provide an alternative way to authenticate when uploading packages to PyPI.</p>
  {% if user.has_primary_verified_email %}
    <p class="no-bottom-padding">
      <a href="{{ request.route_path('manage.account.token') }}" class="button button--primary">Create a token for {{ project.name }}</a>
    </p>
  {% else %}
    <p class="no-bottom-padding">
      <a href="{{ request.route_path('manage.account') }}#account-emails">Verify your primary email address</a> to add an API token for {{ project.name }}.
    </p>
  {% endif %}
  <hr>

  <div class="callout-block" data-controller="dismissable" data-dismissable-identifier="settings">
    <h3>Project description and sidebar</h3>
    <p>
      To set the '{{ project.name }}' description, author, links,
      classifiers, and other details for your next release, use
      the <a href="https://packaging.python.org/tutorials/distributing-packages/#setup-args" rel="noopener" target="_blank"><code>setup()</code>
      arguments in your <code>setup.py</code> file</a>. Updating these
      fields will not change the metadata for past
      releases. Additionally, you <strong>must</strong> use
      <a href="https://twine.readthedocs.io/en/latest/" rel="noopener" target="_blank">Twine</a>
      to upload your files in order to get full support for these fields. See
      <a href="https://packaging.python.org/tutorials/distributing-packages/" rel="noopener" target="_blank">the Python Packaging User Guide</a> for more help.
    </p>
    <button type="button" title="Dismiss" data-action="click->dismissable#dismiss" class="callout-block__dismiss" aria-label="close"><i class="fa fa-times" aria-hidden="true"></i></button>
  </div>

  <div class="callout-block callout-block--danger">
    <h3>Delete project</h3>
    <p>
      <i class="fa fa-exclamation-triangle" aria-hidden="true"><span class="sr-only">Warning</span></i>
      Deleting this project will:
    </p>
    <ul>
      <li>
        {% if project.releases %}
        Irreversibly delete the project along with
        <a href="{{ request.route_path('manage.project.releases', project_name=project.name) }}">
        {{ project.releases|length() }}
        {% trans count=project.releases|length %}
          release
        {%- pluralize -%}
          releases
        {%- endtrans -%}
        </a>
        {% else %}
        Irreversibly delete the project
        {% endif %}
      </li>
      <li>
        Make the project name available to <strong>any other PyPI</strong> user<br>
        <small class="margin-left display-block margin-top margin-bottom">This user will be able to make new releases under this project name, so long as the distribution filenames do not match filenames from a previously released distribution (all PyPI distribution filenames are unique, as they are generated by combining the project name + version number + distribution type)</small>
      </li>
    </ul>
    {% set action = request.route_path('manage.project.delete_project', project_name=project.normalized_name) %}
    {{ confirm_button("Delete project", "Project Name", project.name, action=action) }}
  </div>
{% endblock %}
