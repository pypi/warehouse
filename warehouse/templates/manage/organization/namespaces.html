{#
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    # http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
   -#}
   {% extends "manage_organization_base.html" %}
   
   {% set user = request.user %}
   {% set title = gettext("Organization namespaces") %}
   
   {% set active_tab = 'namespaces' %}
   
   {% block title %}{% trans organization_name=organization.name %}Manage '{{ organization_name }}' namespaces{% endtrans %}{% endblock %}
   
   {% block main %}
     <h2>
       {% trans %}Namespaces{% endtrans %}
       <span class="badge badge--neutral">{{ organization.namespaces|length }}</span>
     </h2>
   
     <div class="namespace-list">
        {% for namespace in organization.namespaces %}
        <div class="namespace-snippet">
          <div class="split-layout split-layout--no-wrap split-layout--wrap-on-tablet">
            <div>
              <h3 class="namespace-snippet__title">
                {{ namespace.name }}

                {% if not namespace.is_approved %}
                <span class="badge badge--neutral" title="{% trans %}You will receive an email when the namespace has been approved{% endtrans %}">{% trans %}Request Submitted{% endtrans %}</span>
                {% endif %}
              </h3>
              <p class="namespace-snippet__meta">
                {% trans creation_date=humanize(namespace.created) %}Created {{ creation_date }}{% endtrans %}
              </p>
            </div>
            <div class="namespace-snippet__buttons">
            </div>
          </div>
        </div>
        {% else %}
          <div class="callout-block no-top-margin">
            <p>
              {% trans %}There are no namespaces in your organization, yet. Organization owners and managers can request new namespaces for the organization.{% endtrans %}
            </p>
          </div>
        {% endfor %}
     </div>
   
      {% if request.has_permission(Permissions.OrganizationNamespaceManage) %}
      <hr>

      {{ form_error_anchor(request_organization_namespace_form) }}
      <section id="request-organization-namespace">
          <h2 class="sub-title">{% trans %}Request namespace{% endtrans %}</h2>
          <form method="POST">
          <input name="csrf_token" type="hidden" value="{{ request.session.get_csrf_token() }}">
          {{ form_errors(request_organization_namespace_form) }}
          <div class="form-group">
              <label class="form-group__label" for="project">
              {% trans %}Ô∏èNamespace{% endtrans %}
              <span class="form-group__required">{% trans %}(required){% endtrans %}</span>
              </label>
              {{ request_organization_namespace_form.name(
              class_="form-group__field",
              aria_describedby="name-errors",
              ) }}
              <div id="existing-namespace-name-errors">
              {{ field_errors(request_organization_namespace_form.name) }}
              </div>
              <p class="form-group__help-text">
              {% trans %}
              Owners and managers of this organization can request a namespace for the organization.
              {% endtrans %}
              </p>
          </div>
          <input value="{% trans %}Request{% endtrans %}" class="button button--primary" type="submit">
          </form>
      </section>
      {% endif %}
   {% endblock %}
   